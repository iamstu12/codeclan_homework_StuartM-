---
title: "Manual Model Development"
author: "Stuart McColl"
date: "07/01/2021"
output:
  html_document:
    df_print: paged
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
  word_document:
    toc: yes
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Part 1 

### Tidy up the data ready for regression

Load libraries and data:

```{r, message=FALSE, warning=FALSE}

library(car)
library(tidyverse)
library(modelr)
library(GGally)
library(relaimpo)
library(lm.beta)
library(fastDummies)

houses <- read_csv("data/kc_house_data.csv")

```

Check for any missing values:

```{r}

houses %>%
  summarise_all(funs(sum(is.na(.))))

```

Remove columns that are not useful:

```{r}

houses_clean <- houses %>% 
  dplyr::select(-c(date, id, sqft_living15, sqft_lot15, zipcode))

names(houses_clean)

```

Covert waterfront into a logical variable:

```{r}

houses_clean <- houses_clean %>% 
  mutate(waterfront = ifelse(waterfront == 1, T, F))

houses_clean

```

Convert 'yr_renovated' into a 'renovated' logical variable:

```{r}

houses_clean <- houses_clean %>% 
  mutate(renovated = ifelse(yr_renovated == 0, F, T)) %>% 
  dplyr::select(-yr_renovated)

houses_clean

```

'Condition' and 'Grade' are both categorical variables. To model the data accurately, it is important to create 'dummy variables' for both condition and grade, which are 'true' or 'false' only:

```{r}

houses_clean %>% 
  summarise(min_grade = min(grade), max_grade = max(grade),
            min_condition = min(condition), max_condition = max(condition))

```

```{r}

houses_dummy <- houses_clean %>%
  dummy_cols(select_columns = c("grade", "condition"), remove_first_dummy = T) %>% 
  dplyr::select(-c(condition, grade))

houses_dummy
  

```

# Part 2

### Check and remove aliased variables

```{r}

alias(lm(price ~ ., data = houses_dummy))

# alias = 'sqft_basement'

```


```{r}

houses_trim <- houses_dummy %>% 
  dplyr::select(-sqft_basement)

houses_trim

```

```{r}

alias(lm(price ~ ., data = houses_trim))

# no aliases found

```


# Part 3

### Regression Models




















